<!DOCTYPE html>
<html>
<head>
    <title>User List</title>
</head>
<body>

<h2>Users</h2>

<table border="1" id="usersTable">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
    </tr>
</table>

<script>
// Remove /hotel_book/ and just use the relative path to the servlet
fetch('api/rooms') 
    .then(res => {
        if (!res.ok) throw new Error("HTTP error " + res.status);
        return res.json();
    })
    .then(data => {
        const table = document.getElementById('usersTable');
        // Clear existing rows (except header) if necessary
        // table.innerHTML = '<tr><th>ID</th><th>Name</th>...</tr>'; 

        data.forEach(user => {
            const row = table.insertRow(-1); // Better way to add rows
            row.innerHTML = `
                <td>${user.id}</td>
                <td>${user.name}</td>
                <td>${user.email}</td>
                <td>${user.role}</td>
            `;
        });
    })
    .catch(err => {
        console.error("Fetch error:", err);
        alert("Failed to load users. Check console for details.");
    });
</script>

</body>
</html>
